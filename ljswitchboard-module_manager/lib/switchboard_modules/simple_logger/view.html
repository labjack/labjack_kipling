{{#with custom}}
<p></p>


<div id="logger_module" class="{{logger_mode}}">
<!-- <div id="logger_module" class="dashboard_mode"> -->
  <div id="logger_controls">
    <div id="navbar-example" class="navbar">
      <div class="navbar-inner">
        <div class="container1">
          <!-- <h2 class="brand active-log-controls">LJ</h2> -->
          <ul class="nav navbar-nav active-log-controls">
            <li>
              <button class="win-command green" rel="tootlip" title="Command with icon and label with border ring" onClick="userLoggerStart()">
                <span class="win-commandicon win-commandring icon-play"></span>
                <!-- <span class="win-label">Start</span> -->
             </button>
            </li>
            <li>
              <button class="win-command red" rel="tootlip" title="Command with icon and label with border ring">
                <span class="win-commandicon win-commandring icon-stop"></span>
                <!-- <span class="win-label">Stop</span> -->
             </button>
            </li>
          </ul>

          <ul class="nav navbar-nav configure-log-controls">
            <li>
              <button class="win-command" href="#" id="newConfig" rel="tootlip" title="Create a new configuration">
                <span class="win-commandicon win-commandring icon-file-4"></span>
                <!-- <span class="win-label">New</span> -->
             </button>
             <script>
              $(document).ready( function() {
               $("#newConfig").on("click", function() {
                 $("#configFormDisplay").load("../../ljswitchboard-module_manager/lib/switchboard_modules/simple_logger/templates/create_configuration.html");
                 });
             });

             $("#newConfig").click(function() {
              //window.confirm("Would you like to clear all of the fields? This will delete all form data!");
              if (confirm("Would you like to clear all of the fields? This will delete all form data!")) {
                  document.getElementById("logName").value = "";
                  document.getElementById("devSN").value = "";
                  document.getElementById("dataGroupName").value = "";
                  //seperation of the top half and the lower half
                  document.getElementById("validationCustom01").value = "";
                  document.getElementById("validationCustom02").value = "";
                  document.getElementById("validationCustom03").value = "";
                  document.getElementById("validationCustom04").value = "";
                  document.getElementById("validationCustom05").value = "";
                  document.getElementById("validationCustom06").value = "";
                  document.getElementById("validationCustom07").value = "";
                  document.getElementById("validationCustom08").value = "";
                } else {
                  // nothing should happen
                }
             });
            </script>
            </li>
            <li>
              <button class="win-command" rel="tootlip" title="Load a configuration" onClick="openFile(loadConfigFile)">
                <span class="win-commandicon win-commandring icon-folder-open"></span>
                <!-- <span class="win-label">Open</span> -->
             </button>
            </li>
            <li>
              <button class="win-command" rel="tootlip" title="Save configuration">
                <span class="win-commandicon win-commandring icon-disk"></span>
                <!-- <span class="win-label">Save</span> -->
             </button>
            </li>
            <!-- <li>
              <button class="win-command" rel="tootlip" id="resetBtn" title="Command with icon and label with border ring">
                <span class="win-commandicon win-commandring icon-code-3"></span>
                <span class="win-label">clear</span> 
             </button>
             <script>
              $("#resetBtn").click(function(){
                
              })
             </script>
            </li> -->
          </ul>
          <ul class="nav pull-right active-log-controls">
            <li>
              <button class="win-command" href="#" id="configViewButton" rel="tootlip" title="Configure">
                <span class="win-commandicon win-commandring icon-cog-4"></span>
                <!-- <span class="win-label">Configure</span> -->
             </button>
             <script>
              $("#configViewButton").click(function(){
                $('.datviewContainer').hide();
                $('#formContainer').show();
              });
             </script>
             <!-- <script>
               $(document).ready( function() {
                $("#configViewButton").on("click", function() {
                  $("#config_view").load("../../ljswitchboard-module_manager/lib/switchboard_modules/simple_logger/templates/view_current_configuration.html");
                  });
              });
             </script> -->
            </li>
          </ul>
          <ul class="nav pull-right configure-log-controls">
            <li>
              <button class="win-command" rel="tootlip" title="Command with icon and label with border ring">
                <span class="win-commandicon win-commandring  icon-statistics" id="DataView"></span>
                <!-- <span class="win-label">Dashboard</span> -->
             </button>
             <!-- working here so i don't forget where i am -->
             <script>
              $("#DataView").click(function(){
                $('#formContainer').hide();
                $('#dataView').show();
                // var arr = new Array (2);
                // arr[0] = document.getElementById('validationCustom05');
                // document.write(arr);
                // array to be displayed
                var array = [];
                array[0] = document.getElementById('validationCustom01').value;
                array[1] = document.getElementById('validationCustom02').value;
                array[2] = document.getElementById('validationCustom03').value;
                array[3] = document.getElementById('validationCustom04').value;
                array[4] = document.getElementById('validationCustom05').value;
                array[5] = document.getElementById('validationCustom06').value;
                array[6] = document.getElementById('validationCustom07').value;
                array[7] = document.getElementById('validationCustom08').value;
                //displays the array seperated by a new line so latter down the
                //line we can put the corisponding data next to it
                //console.log(str.split(',').join("\r\n"));
                //assigns the array elementto the div class
                document.getElementById("display-array").textContent = array[0];
                document.getElementById("display-array1").textContent = array[1];
                document.getElementById("display-array2").textContent = array[2];
                document.getElementById("display-array3").textContent = array[3];
                document.getElementById("display-array4").textContent = array[4];
                document.getElementById("display-array5").textContent = array[5];
                document.getElementById("display-array6").textContent = array[6];
                document.getElementById("display-array7").textContent = array[7];
              });
             </script>
            </li>
          </ul>
        </div><!-- /.container -->
      </div>
    </div>
  </div><!-- /#logger_controls -->
  <!-- <div id="config_view" class="config-pannel">
    <pre id="currentConfigDisp" style="visibility: hidden;"></pre> -->
    <!-- <div id="config_forum"> -->
      <!-- <div class="panel-group"> -->
            <!-- <div class="panel panel-default">
              <div class="panel-heading" role="button" id="configured-views">
                <h4 class="panel-title"> -->
                  <!-- <a class="collapsed" role="button" data-toggle="collapse" href="#loggerViewsCollapsible" aria-expanded="false" aria-controls="collapseOne">
                    Configured Views
                    <span class="badge">0</span>
                  </a> -->
                <!-- </h4>
              </div> -->
              <!-- <div id="loggerViewsCollapsible" class="panel-collapse collapse" role="tabpanel" aria-labelledby="configured-views">
                <div class="panel-body">
                  <div>
                    <p>This is where the configured views will be displayed</p>
                  </div>
                </div>
              </div> -->
            <!-- </div> -->
            <!-- <div class="panel panel-default">
              <div class="panel-heading" role="button" id="configured-data-groups">
                <h4 class="panel-title">
                  <a class="collapsed" role="button" data-toggle="collapse" href="#loggerDataGroupsCollapsible" aria-expanded="false" aria-controls="collapseThree">
                    Defined Data Groups
                    <span class="badge">0</span>
                  </a>
                </h4>
              </div>
              <div id="loggerDataGroupsCollapsible" class="panel-collapse collapse" role="tabpanel" aria-labelledby="configured-data-groups">
                <div class="panel-body">
                  <div>
                    <p>This is where the configured data groups will be displayed.</p>
                  </div>
                </div>
              </div>
            </div> -->
            <!-- </tr>
          </table>
      </div>
    </div> -->
  <!-- </div> -->
  <!-- <div id="logger_view" class="logger-pannel">
    <p>This is the active logger view</p>
  </div>
</div> -->

<div class="container" id="formContainer">
<div class="container">
  <div class="col-sm-7">
      <form id = "configForm" class="needs-validation" >
          <div class="form-group">
              <label for="logName">
                  Log name:
              </label>
              <input type="text" name="logName" id="logName" required class="form-control" class="form-control">
              <h5 id="nameCheck" style="color: red;">
                  Log Name is Missing
              </h5>
          </div>

          <div class="form-group">
            <label for="devSN">
                Device Serial Number:
            </label>
            <input type="text" name="devSN" id="devSN" value = "{{ deviceSN }}" required class="form-control" class="form-control" disabled>
            <!-- <h5 id="nameCheck" style="color: red;">
                Device Serial Number is Missing
            </h5> -->
            
        </div>
          <div class="form-group">
              <label for="dataGroupName">
                  Data Group Name:
              </label>
              <input type="text" name="dataGroup" id="dataGroupName" required class="form-control">
              <h5 id="groupCheck" class="form-text text-muted invalid-feedback" style="color: red;">
                  Please name the data group.
              </h5>
          </div>

          <div class="form-group">
            <label for="validationCustom05">
              Register Name(s):
          </label>
          <!-- start of the registers -->
          <div class="row">
            <div class="col-sm-6">
              <small id="regCheck" class="form-text
                text-muted invalid-feedback">
                Register #1
              </small>
              <input type="text" class="form-control register-input" id="validationCustom01" name="array[]" 
              oninput="this.value = this.value.toUpperCase()">
              <span onclick="var input = this.previousElementSibling; input.value = ''; input.focus();">x</span>
            </div>
            <div class="col-sm-6">
              <small id="regCheck" class="form-text
                text-muted invalid-feedback">
                Register #2
              </small>
              <input type="text" class="form-control register-input" id="validationCustom02" name="array[]"
              oninput="this.value = this.value.toUpperCase()">
              <span onclick="var input = this.previousElementSibling; input.value = ''; input.focus();">x</span>
            </div>

            <div class="col-sm-6">
              <small id="regCheck" class="form-text
                text-muted invalid-feedback">
                Register #3
              </small>
              <input type="text" class="form-control register-input" id="validationCustom03" name="array[]"
              oninput="this.value = this.value.toUpperCase()">
              <span onclick="var input = this.previousElementSibling; input.value = ''; input.focus();">x</span>
            </div>

            <div class="col-sm-6">
              <small id="regCheck" class="form-text
                text-muted invalid-feedback">
                Register #4
              </small>
              <input type="text" class="form-control register-input" id="validationCustom04" name="array[]"
              oninput="this.value = this.value.toUpperCase()">
              <span onclick="var input = this.previousElementSibling; input.value = ''; input.focus();">x</span>
            </div>

            <div class="col-sm-6">
              <small id="regCheck" class="form-text
                text-muted invalid-feedback">
                Register #5
              </small>
              <input type="text" class="form-control register-input" id="validationCustom05" name="array[]"
              oninput="this.value = this.value.toUpperCase()">
              <span onclick="var input = this.previousElementSibling; input.value = ''; input.focus();">x</span>
            </div>

            <div class="col-sm-6">
              <small id="regCheck" class="form-text
                text-muted invalid-feedback">
                Register #6
              </small>
              <input type="text" class="form-control register-input" id="validationCustom06" name="array[]"
              oninput="this.value = this.value.toUpperCase()">
              <span onclick="var input = this.previousElementSibling; input.value = ''; input.focus();">x</span>
            </div>

            <div class="col-sm-6">
              <small id="regCheck" class="form-text
                text-muted invalid-feedback">
                Register #7
              </small>
              <input type="text" class="form-control register-input" id="validationCustom07" name="array[]"
              oninput="this.value = this.value.toUpperCase()">
              <span onclick="var input = this.previousElementSibling; input.value = ''; input.focus();">x</span>
            </div>

            <div class="col-sm-6">
              <small id="regCheck" class="form-text
                text-muted invalid-feedback">
                Register #8
              </small>
              <input type="text" class="form-control register-input" id="validationCustom08" name="array[]"
              oninput="this.value = this.value.toUpperCase()">
              <span onclick="var input = this.previousElementSibling; input.value = ''; input.focus();">x</span>
            </div>

            <!-- end of the refgisters -->
          </div>
        </div>
          <div class="form-group">
            <label for="filePath">
              Log File(s) Save Location:
          </label>
            <div class="col-lg">
              <!-- <input type="file" class="form-control" id="selectDir" required class="form-control" webkitdirectory directory>
              <small id="pathCheck" class="form-text
                  text-muted invalid-feedback">
                  Please Provide a Valid Directory Path.
              </small> -->
              <!-- <div style="text-align:center;"> -->
                <input type="text" placeholder="Please select a file" id="actual-file" disabled="disabled"/>
                <input type="button" value="Choose a file" id="select-file" class="btnUpdate"/>
              <!-- </div> -->
            </div>
          </div>
          <!-- btn btn-primary -->

          <button id="submitbtn" title="Verify and Load Configuration" class="btnUpdate" >
          <!-- <script src="/controller.js"></script> -->

          <!-- onClick="isValidRegister('this.value')" -->

      </form>
      <script>
        $(document).ready(function () {
          $('.datviewContainer').hide();
          $('#formContainer').show();
          const { dialog } = require('electron').remote; 
          // var dialog = require('electron').dialog;
          var fs = require('fs');

          document.getElementById('select-file').addEventListener('click',function(){
                dialog.showOpenDialog({
                  properties: ['openDirectory']
                }).then((data) => {
                  // alert(data.filePaths)
                  // console.error(data)
                  $("#actual-file").val(data.filePaths)
                })
            },false);

          function validateLogName(){
            return true
          }

          function validateFilePath(){
            // TO-DO: check file path for log-to-file is valid directory
            return true
          }

          function validateRegisters(){
            // TO-DO: check that all selected registers are valid for selected device and can be streamed
            return true
          }

          document.getElementById("configForm").addEventListener('submit', function() {
            $(".register-input").setCustomValidity('');
            // this prevents the framework from handling the form submission
            // which for some reason clears the entire page and breaks Kipling
            event.preventDefault(); 
            validateForm();
            return false;
          });


        // Submit buttonxs
        //function
          function validateForm() {
            const constants = require('ljswitchboard-modbus_map').getConstants().constantsByName; 
            var regArr = [];
            // uses jquery to loop through all register form entries
            $(".register-input").each(function(i, obj) {
              //$(this).get(0).setCustomValidity('')
              let regVal = $(this).val()
                  //alert(regVal)
                  //$.getScript("controller.js", isValidRegister(regVal))

                if(regVal.length > 0) { 
                  if(regVal == constants){
                    $(this).get(0).setCustomValidity('something cool')
                  }
                  regArr.push(regVal);
                  x = true;
                  //$(this).get(0).setCustomValidity("this should be working")
                }
                else {
                  // This line will give the small popup that a register is invalid
                  $(this).get(0).setCustomValidity('Invalid Register')
              }
              
              var array = [];
              array[0] = document.getElementById('validationCustom01').value;
              array[1] = document.getElementById('validationCustom02').value;
              array[2] = document.getElementById('validationCustom03').value;
              array[3] = document.getElementById('validationCustom04').value;
              if(array[4] != null){
                array[4] = document.getElementById('validationCustom05').value;
                array[5] = document.getElementById('validationCustom06').value;
                array[6] = document.getElementById('validationCustom07').value;
                array[7] = document.getElementById('validationCustom08').value;

              }
              else{
                //return true;
              }
              
                  
              //$.getScript("controller.js", isValidRegister(regVal))
            alert(array)

            });

            function findByName(name){
            for (var i = 0; i < registers.length; i++){
              if(registers[i].name === name){
                $(this).get(0).setCustomValidity('working register')
                return true;
              }
              else{
                return false;
              }
            }
          };
          }
          }
        );
        
      </script>
  </div>
</div>
</div>

<div class="datviewContainer" id="dataView" >
d
  <script>
    var arrayElements = document.getElementById("arrey");
    var finalArray = jQuery.makeArray( arrayElements );
    var res = finalArray.length;
    for (var i = 0; i < 3; i++){
      var $label = $("<label>").text('Date:');
      // table.append(row);
    }

    finalArray.reverse();
    $( finalArray ).appendTo( document.body );
  </script>
  <div id="display-array" class="logerViewStyle"></div>
  <div id="display-array1" class="logerViewStyle"></div>
  <div id="display-array2" class="logerViewStyle"></div>
  <div id="display-array3" class="logerViewStyle"></div>
  <div id="display-array4" class="logerViewStyle"></div>
  <div id="display-array5" class="logerViewStyle"></div>
  <div id="display-array6" class="logerViewStyle"></div>
  <div id="display-array7" class="logerViewStyle"></div>
</div>




<pre class="selectableText">{{printContext}}</pre>

<div id="list pf reg"></div>
{{/with}}
